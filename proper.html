<head>
  <title>proper</title>
</head>

<body>
  {{> page}}
</body>

<template name="page">
  <div class="container">
    {{> directionsForm}}

    <hr />

    {{> questions}}

    <hr />
    <button class="update-foursquare">Update Foursquare destinations</button>
  </div>
</template>

<template name="directionsForm">
  <h1>Directions</h1>
  <div class="row">
    <div class="col-sm-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          From
        </div>
        <div class="panel-body">
          {{#if selectedFrom}}
            {{selectedFrom.name}}
            <button class="cancel-selection" data-type="from">X</button>
          {{else}}
            <input class="form-control" name="from" type="text" />
            <ul class="list-group">
              {{#each fromLandmarks}}
                <li class="list-group-item" data-id="{{_id}}" data-type="from">{{name}}</li>
              {{else}}
                Please type more than 2 characters
              {{/each}}
            </ul>
          {{/if}}
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">
          To
        </div>
        <div class="panel-body">
          {{#if selectedTo}}
            {{selectedTo.name}}
            <button class="cancel-selection" data-type="to">X</button>
          {{else}}
            <input class="form-control to" name="to" type="text" />

            <ul class="list-group">
              {{#each toLandmarks}}
                <li class="list-group-item" data-id="{{_id}}" data-type="to">
                  {{name}}
                </li>
              {{else}}
                Please type more than 2 characters
              {{/each}}
            </ul> 
          {{/if}}
        </div>
      </div>
    </div>

    <div class="col-sm-6">
      {{#if question}}
        {{#with question}}
          <div>
            <h2>Answers:</h2>
            {{#each answers}}
              <p>{{text}}</p>
            {{else}}
              <p>There haven't been any answers yet.</p>
            {{/each}}
          </div>
        {{/with}}
      {{else}}
        <h2>Similar questions</h2>
        <div class="well">
          No similar questions found.
        </div>
        <p>This question hasn't been posted yet.</p>
        <button class="btn btn-lg btn-primary post-question">
          Post Question</button>
      {{/if}}
    </div>
  </div>
</template>

<template name="questions">
  <h1>Recent Questions</h1>
  {{#each questions}}
    <div class="panel panel-default">
      
      {{#if answeringThisQuestion}}
        <div class="panel-heading">
          {{fromLandmark.name}}
          <span class="glyphicon glyphicon-arrow-right"></span>
          {{toLandmark.name}}
        </div>
        <div class="panel-body">
          <div>
            <textarea class="answer-textarea" style="width: 100%"></textarea>
          </div>
          <button class="post-answer btn btn-sm btn-success">Post Answer</button>
          <button class="cancel-answering btn btn-sm btn-danger">Cancel</button>
        </div>
      {{else}}
        <div class="panel-body">
          {{fromLandmark.name}}
          <span class="glyphicon glyphicon-arrow-right"></span>
          {{toLandmark.name}}
          <button class="btn btn-xs btn-primary answer pull-right">Answer</button>
        </div>
      {{/if}}
    </div>
  {{/each}}
</template>